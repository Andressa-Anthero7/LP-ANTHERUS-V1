<!DOCTYPE html>
{% load static %}
  {% csrf_token %}

<head>




	<meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Antherus</title>

	<!-- CSS
	 <link rel="stylesheet" type="text/css" href="{% static 'css/normalize.css' %}">-->


	<!-- Jquery CDN -->
	 <script src="https://code.jquery.com/jquery-3.2.1.js" integrity="sha256-DZAnKJ/6XZ9si04Hgrsxu/8s717jcIzLy3oi35EouyE=" crossorigin="anonymous"></script>

	<!-- Boostrap 4 CDN  -->
	<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">


	 <script src='https://cdn.jsdelivr.net/npm/fullcalendar@6.1.4/index.global.min.js'></script>


	<!-- FontAwesome CDN -->
	<script src="https://kit.fontawesome.com/a69cec9c91.js" crossorigin="anonymous"></script>
     <link rel="stylesheet" href="fontawesome/css/all.css">
     <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.css" rel="stylesheet" />



	<!-- CSS -->
	 <link rel="stylesheet" type="text/css" href="{% static 'css/atendimento-estilo.css' %}">

	<!--SCRIPT DO CALENDAR -->
			<script type="text/javascript">


	 const bancoDados = new Array();
          document.addEventListener('DOMContentLoaded', function() {



              var calendarEl = document.getElementById('calendar');
              var calendar = new FullCalendar.Calendar(calendarEl, {

              locale: 'pt-br',
        	    timeZone: 'UTC',


      		    timeFormat: 'HH:mm',
      		    editable: true,
              droppable: true,
              startEditable:true,




              initialView: 'timeGridDay',
              selectable:true,

              slotDuration: {minutes:10},
              slotLabelInterval:{minutes:10},
              slotLabelFormat: [
      					{  hour: 'numeric', minute:'numeric' }, // top level of text

    				  ],





              headerToolbar: {
                left: 'prev,next',
                  center: 'title',
                right: 'timeGridWeek,timeGridDay' // user can switch between the two

              },






              buttonText: {

                week: 'Semana',
                day: 'Hoje',

              },










          select: function(info) {





           		$('#calendarModal-1').modal('show');
              var nome = $('#nome-leads-atendimento').text();
              $('#nome-agendamento').val(nome);

              /* BTN SALVAR AGENDAMETO NO MODAL */

           		$(document).on('click','#salvar-agendamento',function(){
              			//var nome = $('#nome-agendamento').val();
                         var valor = info.startStr;




                        var min = new Array();



                        min = valor[14]+''+valor[15];
                        min = parseInt(min);
                        final = valor.replace(':'+valor[14]+''+valor[15],min+10);
                        alert(valor)
                        alert(final)


                       dados=calendar.addEvent({
                              title: nome,
                              start: valor,
                              end: final,
                              locale: 'pt-br',
                              timeZone: 'UTC',


                              timeFormat: 'HH:mm',
                              editable: true,
                              droppable: true,
                              startEditable:true,


                        })



                        //$('#nome-agendamento').val('');


                        var formData = new FormData();


                        formData.append('nome_agendamento',dados.title)
						formData.append('data_evento',dados.startStr)
						formData.append('data_termino', dados.endStr)





                      var request = new XMLHttpRequest()


                      request.open('POST', 'https://nix2022.pythonanywhere.com/criar_agendamento/',false)



                      const csrftoken = document.querySelector('[name=csrfmiddlewaretoken]').value



                      request.setRequestHeader('X-CSRFToken', csrftoken)



                      request.send(formData)


                      setTimeout(function() {
                          window.location.href = "https://nix2022.pythonanywhere.com/";
                     }, 500);





                })/*FINAL DO BTN */

           },/*FINAL DO SELECT */

          eventClick: function deletar(info) {

             $('#id-agendamento').html(info.event.id);
             $('#modalTitle').html(info.event.title);
             var data_agendamento = info.event.startStr;
             $('#data-agendamento').html(data_agendamento);
             $('#campo-editar-titulo').val(info.event.title)
             $('#campo-editar-data-agendamento').val(info.event.startStr)

              $('#calendarModal').modal('show');







            },

             eventDrop: function(info) {
             var formData = new FormData()
             var valor = info.event.startStr
             //alert(valor)


              formData.append('title',info.event.title)
              formData.append('hora',info.event.startStr)
               var request = new XMLHttpRequest()
               url = 'http://127.0.0.1:8000/editar/'+info.event.id+'/';
               //alert(url)
              request.open('POST',url ,false)

               const csrftoken = document.querySelector('[name=csrfmiddlewaretoken]').value


              request.setRequestHeader('X-CSRFToken', csrftoken)


             request.send(formData)

              setTimeout(function() {
                                  window.location.href = "http://127.0.0.1:8000";
                             }, 500);









           },










           events:[


                   {% for agendamentos in agendamentos %}
                        {
                                id : '{{agendamentos.id}}',
                                title  : '{{agendamentos.nome_agendamento}}',
                                start  : '{{agendamentos.data_evento}}',
                                end : '{{agendamentos.data_termino}}',



                        },
                    {% endfor %}



           ],









       });
      calendar.render();






});
			</script>







</head>

<!-- Corpo do HTML -->
<body >
	<!-- Container -->
	<div class="container-fluid ">
		<!-- Header da Pagina -->
		<header id="header">
			<!-- Imagem da Logo -->
			<img src="{% static 'img/logo-2.png' %}" id="img-logo">

			<!-- Switch para Background BlackMode/WhiteMode -->
			<span id="switch-dark-mode">


				<label for="switch"><i class="fa fa-moon-o" id="btn-mode-dark" aria-hidden="true"></i></label>

				<input type="checkbox" id="switch" />

			</span>

			<!-- SCRIPT DO DARK MODE -->
			<script type="text/javascript" src="{% static 'js/darkmode.js' %}"></script>

		</header>


			<!-- Header do Dashboard -->
			<div id="header-dashboard" class="text-center">
					<!--DATA DO DIA DATA DO HEADER -->
					<div id="data-hora-header" ></div>
			</div>

			<!-- NAVEGAÇAO -->
			<nav id="navegacao">

			<!--BARRA DE PESQUISA -->
			<div id="pesquisa">

					<form method="GET" class="" id="form-pesquisa">
							<!-- BTN MENU HAMBURGUER -->
								<i class="fa fa-bars menu-hamburguer-closed btn" data-toggle="collapse" data-target="#menu-deslizante" id="menu-hamburguer" aria-hidden="true"></i>

								<!--INPUT DA BARRA DE PESQUISA -->
								<input type="text" name="barra-pesquisa" id="barra-pesquisa" class="barra-pesquisa-closed form-control" placeholder="Pesquisar">

								<!--BTN PESQUISAR -->
								<span id="btn-pesquisar" class=" btn-sm btn-primary ">Ok</span>
					</form>


			</div>

			<!-- Menu Deslizante -->
				<div id="menu-deslizante" class="collapse p-1">

					<!--HEADER DO MENU DESLIZANTE -->
					<h5 id="header-menu-deslizante" class="">Antherus - Gerenciador de Leads</h5>
					<!-- PERFIL DO USUÁRIO -->
					<div id="perfil-user" class="text-center">
						<!--Foto Perfil User -->

							<img id="img-perfil-user" class="img img-fluid "  src="logo.png" alt="Foto Perfil Usuário">

						<div id="nome-perfil">ANDRESSA CRISTINA ANTHERO</div>
						<script type="text/javascript">
							var tamanhoNomeperfil = $('#nome-perfil').text();
							var tamanho = tamanhoNomeperfil.length
							//alert(tamanho)
							if(tamanho <= 25){
								$('#nome-perfil').css({'font-size':'1.1em','position':'relative','left':'0.7em'});
								//alert(' 25 ou menor')
							};

							if(tamanho <= 20){
								$('#nome-perfil').css({'font-size':'1.4em'});
								//alert(' 25 ou menor')
							};

							if(tamanho <= 15){
								$('#nome-perfil').css({'font-size':'1.8em','position':'relative','left':'0.5em'});
								//alert(' 25 ou menor')
							};
						</script>
						<span id="editar-perfil" class="btn btn-outline-primary  " ><a href="editar-perfil.html" class=" text-decoration-none fa fa-edit d-inline">Editar Perfil</a></span>
						<span id="config-perfil" class="btn btn-outline-primary  " ><a href="configuracao.html" class="fa fa-cog d-inline text-decoration-none">Configurações</a></span>

					</div>
					<!-- BTNS DO MENU -->
					<div id="menu" class="mt-3">
						<!-- BTN LEADS -->
						<div class="btn  btn-menu " id="todos-leads" >
							<i class="fa fa-envelope-open ml-3" ></i>
							<span class="text-btn-menu">Todos Leads</span>
							<span class="qtde-leads-btn-menu">100000</span>
						</div>

						<!-- BTN -->
						<div class="btn  btn-menu " id="novos-leads">
							<i class="fa fa-envelope-open ml-3" ></i>
							<span class="text-btn-menu">Novos Leads</span>
							<span class="qtde-leads-btn-menu">100000</span>
						</div>

						<!-- BTN -->
						<div class="btn  btn-menu " id="leads-aberto">
							<i class="fa fa-envelope-open ml-3" ></i>
							<span class="text-btn-menu">Leads em Aberto</span>
							<span class="qtde-leads-btn-menu">100000</span>
						</div>

						<!-- BTN -->
						<div class="btn  btn-menu " id="leads-atendimento">
							<i class="fa fa-envelope-open ml-3" ></i>
							<span class="text-btn-menu">Leads em Atendimento</span>
							<span class="qtde-leads-btn-menu">100000</span>
						</div>

						<!-- BTN -->
						<div class="btn  btn-menu " id="leads-nao-atendido">
							<i class="fa fa-envelope-open ml-3" ></i>
							<span class="text-btn-menu">Leads Não Atendido</span>
							<span class="qtde-leads-btn-menu">100000</span>
						</div>

						<!-- BTN -->
						<div class="btn  btn-menu " id="leads-positivo">
							<i class="fa fa-envelope-open ml-3" ></i>
							<span class="text-btn-menu">Leads Positivo</span>
							<span class="qtde-leads-btn-menu">100000</span>
						</div>

						<!-- BTN -->
						<div class="btn  btn-menu " id="leads-neutro">
							<i class="fa fa-envelope-open ml-3" ></i>
							<span class="text-btn-menu">Leads Status Neutro</span>
							<span class="qtde-leads-btn-menu">100000</span>
						</div>

						<!-- BTN -->
						<div class="btn  btn-menu " id="leads-negativo">
							<i class="fa fa-envelope-open ml-3" ></i>
							<span class="text-btn-menu">Leads Status Negativo</span>
							<span class="qtde-leads-btn-menu">100000</span>
						</div>
						<!--SCRIPT BTN MENU -->
						<script type="text/javascript" src="{% static 'js/script-btn-menu.js' %}"></script>


					</div>


				</div>

			</nav>

		<!-- DADOS DO LEADS EM ATENDIMEMTO -->
		<div id="leads-atendimento" class="text-center">
			<!-- BTN VOLTAR -->
			<div id="btn-voltar"><a href="{% url 'dashboard' %}" id="btn-voltar" class="fa fa-arrow-left btn btn-outline-primary"><span id="text-btn-voltar"> voltar</span></a></div>


			{% for leads_atendimento in leads_atendimento %}
			<div id="dados-leads-atendimento" class="m-3 ">
				<div id="id-leads-atendimento">
					<span>Id:</span>
					<span>{{leads_atendimento.pk}}</span>
				</div>
				<div id="campo-nome-leads-atendimento" class="m-3">
					<span class="mr-1">Nome:</span>
					<span id="nome-leads-atendimento">{{leads_atendimento.nome_leads}}</span>
				</div>
				<div  class="m-3">
					<span class="mr-1">Email:</span>
					<span id="email-leads-atendimento">{{leads_atendimento.email}}</span>
				</div>
				<a href="https://wa.me/55{{leads_atendimento.whatsapp|slice:'1:3'}}{{leads_atendimento.whatsapp|slice:'4:'}}?text=Acabei%20de%20%20ver%20a%20promoção%20Landing%20Page%20por%20R$%20299,90"  class="btn btn-success m-3 p-2">
					<span class="">Falar pelo</span>
					<span class="fa fa-whatsapp mx-1" ></span>
					<span id="whatsapp-leads-atendimento">{{leads_atendimento.whatsapp}}</span>
				</a>
			</div>
			{% endfor %}


		</div>

		<!-- FINAL DO LEADS EM ATENDIMEMTO -->








		<!--AREA AGENDAMENTO -->
		<div id="area-agendamento" class="bg-primary ">
			<span id="btn-agenda" class="btn btn-light"><i class=" fa fa-chevron-down"></i></span>
			<span id="label-btn-agendamentos">Agendamentos</span>

			<!--SCRIPT BTN AGENDAMENTOS -->
			<script type="text/javascript" src="{% static 'js/script-btn-agendamentos.js' %}"></script>
		</div>




		<!-- AGENDAMENTOS -->
			<div id='calendar'></div>

			<!-- MODAL 1 -->
		     <div id="calendarModal-1" class="modal fade">
		        <div class="modal-dialog">
		            <div class="modal-content">
		                <div class="modal-header">
		                    <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">×</span> <span class="sr-only">close</span></button>

		                </div>
		                <div id="modalBody-1" class="modal-body  d-block">

		                      <h4 id="modalTitle-1" class="modal-title text-center">Criar Evento</h4>
		                      <form>
		                      	<label for="nome-agendamento">Cliente</label>

		                      	<input type="text" name="nome" class="form-control" id="nome-agendamento">




		                      </form>


		                </div>
		                <div class="modal-footer">


		                	<button type="submit" class="btn btn-success" id="salvar-agendamento"  data-dismiss="modal" >Salvar</button>

		                    <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
		                </div>
		            </div>
		        </div>
		    </div>
		    <!-- FINAL MODAL -->








			<!-- FINAL AGENDAMENTOS -->





			<!--AREA CADASTRAR -->
			<div id="area-cadastrar-atendimento" class="bg-primary ">
				<span id="btn-cadastrar-atendimento" class="btn btn-light"><i class=" fa fa-chevron-down"></i></span>
				<span id="label-btn-cadastrar-atendimento">Cadastrar Atendimento</span>

			</div>

			<!--SCRIPT ABRIR ATENDIMENTO -->
			<script type="text/javascript" src="{% static 'js/script-abrir-atendimento.js' %}"></script>

			<!-- ATENDIMENTO -->
			<div id="atendimento">

				<!-- FORMULÁRIO ATENDIMENTO -->
				<form id="form-atendimento">
					<h4 class="m-2 text-center">Cadastro de Atendimento</h4>
					<div class="text-center">
						<label for="anotacoes-atendimento" id="label-anotacoes-atendimento" class="border border-primary bg-primary rounded p-2 text-white">Anotações do Atendimento</label>
						<textarea id="text-area-anotacoes-atendimento" class="form-control" name="anotacoes-atendimento" maxlength="300"></textarea>
						<input type="submit" name="enviar-anotacoes-atendimento" id="enviar-anotacoes-atendimento" class="btn btn-lg btn-warning">
					</div>
				</form>



					<!-- LISTAGEM DE ATENDIMENTOS -->
				<div id="lista-atendimento" class=" border border-dark rounded ">
					<h4 class="m-2 text-center">Histórico de Atendimento</h4>

					<div class="atendimento-cadastrado border border-dark rounded p-1 m-1">
						<p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nam luctus mi vitae ipsum vehicula porta at a magna. Proin eu dui est. Fusce id volutpat lacus. Fusce dapibus dui sed est scelerisque, et scelerisque nulla hendrerit. Sed sit amet ultricies orci. Phasellus commodo commodo ante, id semper ante.</p>
						<small>23-03-2023 ás 12:22</small>

					</div>

					<div class="atendimento-cadastrado border border-dark rounded p-1 m-1">
						<p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nam luctus mi vitae ipsum vehicula porta at a magna. Proin eu dui est. Fusce id volutpat lacus. Fusce dapibus dui sed est scelerisque, et scelerisque nulla hendrerit. Sed sit amet ultricies orci. Phasellus commodo commodo ante, id semper ante.</p>
						<small>23-03-2023 ás 12:22</small>

					</div>

					<div class="atendimento-cadastrado border border-dark rounded p-1 m-1">
						<p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nam luctus mi vitae ipsum vehicula porta at a magna. Proin eu dui est. Fusce id volutpat lacus. Fusce dapibus dui sed est scelerisque, et scelerisque nulla hendrerit. Sed sit amet ultricies orci. Phasellus commodo commodo ante, id semper ante.</p>
						<small>23-03-2023 ás 12:22</small>

					</div>

					<div class="atendimento-cadastrado border border-dark rounded p-1 m-1">
						<p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nam luctus mi vitae ipsum vehicula porta at a magna. Proin eu dui est. Fusce id volutpat lacus. Fusce dapibus dui sed est scelerisque, et scelerisque nulla hendrerit. Sed sit amet ultricies orci. Phasellus commodo commodo ante, id semper ante.</p>
						<small>23-03-2023 ás 12:22</small>

					</div>

					<div class="atendimento-cadastrado border border-dark rounded p-1 m-1">
						<p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nam luctus mi vitae ipsum vehicula porta at a magna. Proin eu dui est. Fusce id volutpat lacus. Fusce dapibus dui sed est scelerisque, et scelerisque nulla hendrerit. Sed sit amet ultricies orci. Phasellus commodo commodo ante, id semper ante.</p>
						<small>23-03-2023 ás 12:22</small>

					</div>
					<div class="atendimento-cadastrado border border-dark rounded p-1 m-1">
						<p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nam luctus mi vitae ipsum vehicula porta at a magna. Proin eu dui est. Fusce id volutpat lacus. Fusce dapibus dui sed est scelerisque, et scelerisque nulla hendrerit. Sed sit amet ultricies orci. Phasellus commodo commodo ante, id semper ante.</p>
						<small>23-03-2023 ás 12:22</small>

					</div>




				</div>

			</div>

			<!-- FINAL ATENDIMENTO -->


			<!-- CADASTRAR FICHA CLIENTE -->

			<div id="area-cadastrar-cliente" class="bg-primary ">
				<span id="btn-cadastrar-cliente" class="btn btn-light"><i class=" fa fa-plus-circle"></i></span>
				<span id="label-btn-cadastrar-cliente">Cadastrar Cliente</span>

				<!-- CADASTRAR CLIENTE -->
				<script type="text/javascript" src="{% static 'js/btn-cadastrar-cliente.js' %}"></script>
			</div>



			<!-- MODAL 2 -->
		     <div id="calendarModal-2" class="modal fade">
		        <div class="modal-dialog">
		            <div class="modal-content">
		                <div class="modal-header">
		                    <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">×</span> <span class="sr-only">close</span></button>

		                </div>
		                <div id="modalBody" class="modal-body  d-block">

		                      <h4 id="modalTitle" class="modal-title text-center">Cadastrar Cliente</h4>
		                      <form>
		                      	<div id="campo-nome-cliente">
		                      		<label for="nome-cliente">Nome Cliente</label>

		                      		<input type="text" name="nome_cliente" class="form-control" id="nome-cliente">

		                      	</div>

		                      	<div id="campo-email-cliente">
		                      		<label for="nome-cliente">E-mail</label>

		                      		<input type="text" name="email_cliente" class="form-control" id="email-cliente">

		                      	</div>

		                      	<div id="campo-whatsapp-cliente">
		                      		<label for="nome-cliente">WhatsAPP</label>

		                      		<input type="text" name="whatsapp_cliente" class="form-control" id="whatsapp-cliente">

		                      	</div>

		                      	<div class="p-1 mt-3">Confira os dados e Salve na base de Clientes</div>






		                      </form>


		                </div>
		                <div class="modal-footer">


		                	<button type="submit" class="btn btn-success" id="salvar-ficha-cliente"  data-dismiss="modal" >Salvar</button>

		                    <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
		                </div>
		            </div>
		        </div>
		    </div>
		    <!-- FINAL MODAL 2 -->



			<!-- FINAL CADASTRAR FICHA CLIENTE -->






			<!-- FOOTER -->
		<footer >
			<i class="fa fa-copyright text-center" aria-hidden="true">Copyright</i>
			<div>Antherus - Desenvolvimento Web</div>
			<small><i class="fa fa-whatsapp mr-1" aria-hidden="true"></i><span>(16) 99337-9492</span></small>
		</footer>



	</div>
	<!-- FINAL CONTAINER -->

	<!-- Java Script -->
	<script type="text/javascript" src="{% static 'js/script-atendimento.js'%}"></script>

	<!--SCRIPT FICHA-CLIENTE -->
			<script type="text/javascript" src="{% static 'js/script-ficha-cliente.js' %}"></script>




	<!-- jQuery first, then Popper.js, then Bootstrap JS -->
    <script src="https://code.jquery.com/jquery-3.2.1.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
</body>
</html>